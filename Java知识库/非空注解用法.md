## 常用非空注解及其用法


在 Java 开发中，特别是在使用 Spring 框架时，我们经常需要对输入的数据进行校验，确保它们不是空的。为了方便这个过程，Java 提供了许多非空注解。下面我将介绍一些常用的非空注解，包括 `@NotBlank` 等，并解释它们的用法。

### 1. `@NotNull`

* **作用：** 校验被注解的元素不能为 `null`。
* **适用类型：** 任何类型，包括 `String`、`Integer`、自定义对象等。
* **示例：**
  **Java**
  
  ```
  import javax.validation.constraints.NotNull;
  
  public class User {
      @NotNull(message = "用户ID不能为空")
      private Long id;
  
      @NotNull(message = "用户名不能为空")
      private String username;
  
      // ... getters and setters
  }
  ```
  
  **注意：**`@NotNull` 不会校验空字符串或只包含空格的字符串。

### 2. `@NotEmpty`

* **作用：** 校验被注解的元素不能为 `null`，且其大小或长度必须大于零。
* **适用类型：**`String`、`Collection`（如 `List`、`Set`）、`Map` 和数组。
* **示例：**
  **Java**
  
  ```
  import javax.validation.constraints.NotEmpty;
  import java.util.List;
  
  public class Product {
      @NotEmpty(message = "产品名称不能为空")
      private String name;
  
      @NotEmpty(message = "产品标签不能为空")
      private List<String> tags;
  
      // ... getters and setters
  }
  ```
  
  **注意：** 对于 `String` 类型，`@NotEmpty` 会校验空字符串，但不会校验只包含空格的字符串。

### 3. `@NotBlank`

* **作用：** 校验被注解的字符串不能为 `null`，且其去除首尾空格后的长度必须大于零。
* **适用类型：** 仅适用于 `String` 类型。
* **示例：**
  **Java**
  
  ```
  import javax.validation.constraints.NotBlank;
  
  public class Article {
      @NotBlank(message = "文章标题不能为空")
      private String title;
  
      @NotBlank(message = "文章内容不能为空")
      private String content;
  
      // ... getters and setters
  }
  ```
  
  **注意：**`@NotBlank` 是最严格的字符串非空校验，它能有效防止只输入空格的情况。

### 4. 总结与比较

| 注解            | 适用类型                                      | `null` | 空字符串 (`""`) | 只包含空格 (`"   "`) |
| ----------------- | ----------------------------------------------- | ------------ | --------------------- | -------------------------- |
| `@NotNull`  | 任何类型                                      | ✘         | ✔                  | ✔                       |
| `@NotEmpty` | `String`,`Collection`,`Map`, 数组 | ✘         | ✘                  | ✔                       |
| `@NotBlank` | `String`                                  | ✘         | ✘                  | ✘                       |

导出到 Google 表格

* **`@NotNull`**: 仅检查是否为 `null`。
* **`@NotEmpty`**: 在 `@NotNull` 的基础上，进一步检查集合、字符串、Map或数组是否为空（长度为0）。
* **`@NotBlank`**: 在 `@NotEmpty` 的基础上，进一步检查字符串是否只包含空格。

### 如何使用这些注解进行校验？

这些注解通常与 **Java Bean Validation (JSR 303/380)** 规范一起使用，Spring Boot 项目通常会默认引入 `spring-boot-starter-validation` 依赖，它包含了 Hibernate Validator（一个 JSR 规范的实现）。

你可以在 Controller 层的方法参数上使用 `@Valid` 或 `@Validated` 注解来触发校验：

**Java**

```
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class UserController {

    @PostMapping("/users")
    public String createUser(@Validated @RequestBody User user) {
        // 如果user对象校验失败，会抛出MethodArgumentNotValidException异常
        // 你可以通过全局异常处理器来捕获并处理这些异常
        return "用户创建成功：" + user.getUsername();
    }
}
```

